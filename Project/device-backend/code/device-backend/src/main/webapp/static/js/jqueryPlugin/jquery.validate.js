!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(d){d.extend(d.fn,{validate:function(t){if(this.length){var i=d.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new d.validator(t,this[0]),d.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),d(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==d(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(r){function t(){var t,e;return!i.settings.submitHandler||(i.submitButton&&(t=d("<input type='hidden'/>").attr("name",i.submitButton.name).val(d(i.submitButton).val()).appendTo(i.currentForm)),e=i.settings.submitHandler.call(i,i.currentForm,r),i.submitButton&&t.remove(),void 0!==e&&e)}return i.settings.debug&&r.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,t()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):t():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,e;return d(this[0]).is("form")?t=this.validate().form():(t=!0,e=d(this[0].form).validate(),this.each(function(){t=e.element(this)&&t})),t},removeAttrs:function(t){var r={},i=this;return d.each(t.split(/\s/),function(t,e){r[e]=i.attr(e),i.removeAttr(e)}),r},rules:function(t,e){var r,i,n,s,a,o,u=this[0];if(t)switch(i=(r=d.data(u.form,"validator").settings).rules,n=d.validator.staticRules(u),t){case"add":"object"==typeof e?e.rules&&d.extend(n,e.rules):d.extend(n,d.validator.normalizeRule(e)),delete n.messages,i[u.name]=n,e.messages&&(r.messages[u.name]=d.extend(r.messages[u.name],e.messages)),"object"==typeof e&&e.messages&&(r.messages[u.name]=d.extend(r.messages[u.name],e.messages));break;case"remove":return e?(o={},d.each(e.split(/\s/),function(t,e){o[e]=n[e],delete n[e],"required"===e&&d(u).removeAttr("aria-required").removeAttr("required")}),o):(delete i[u.name],n)}return(s=d.validator.normalizeRules(d.extend({},d.validator.classRules(u),d.validator.attributeRules(u),d.validator.dataRules(u),d.validator.staticRules(u)),u)).required&&(a=s.required,delete s.required,s=d.extend({required:a},s),d(u).attr("aria-required","true")),s.remote&&(a=s.remote,delete s.remote,s=d.extend(s,{remote:a})),s}}),d.extend(d.expr[":"],{blank:function(t){return!d.trim(""+d(t).val())},filled:function(t){return!!d.trim(""+d(t).val())},unchecked:function(t){return!d(t).prop("checked")}}),d.validator=function(t,e){this.settings=d.extend(!0,{},d.validator.defaults,t),this.currentForm=e,this.init()},d.validator.format=function(r,t){return 1===arguments.length?function(){var t=d.makeArray(arguments);return t.unshift(r),d.validator.format.apply(this,t)}:(2<arguments.length&&t.constructor!==Array&&(t=d.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),d.each(t,function(t,e){r=r.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})}),r)},d.extend(d.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"help-error",validClass:"valid",errorElement:"span",focusCleanup:!1,focusInvalid:!0,errorContainer:d([]),errorLabelContainer:d([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,r){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(r):d(t).addClass(e).removeClass(r)},unhighlight:function(t,e,r){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(r):d(t).removeClass(e).addClass(r)}},setDefaults:function(t){d.extend(d.validator.defaults,t)},messages:{required:"必填项",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入数字",digits:"请输入数字（整数）",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",maxlength:d.validator.format("长度最多 {0} 位"),minlength:d.validator.format("长度最少 {0} 位"),rangelength:d.validator.format("长度范围 {0} ~ {1} 位"),range:d.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),max:d.validator.format("请输入一个最大为{0} 的值"),min:d.validator.format("请输入一个最小为{0} 的值"),roleId:"选择一个角色",regExp:"格式不对",maxLen:d.validator.format("最多 {0} 字符")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=d(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||d(this.currentForm),this.containers=d(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var r,i=this.groups={};function t(t){var e=d.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,""),i=e.settings;i[r]&&!this.is(i.ignore)&&i[r].call(e,this[0],t)}d.each(this.settings.groups,function(r,t){"string"==typeof t&&(t=t.split(/\s/)),d.each(t,function(t,e){i[e]=r})}),r=this.settings.rules,d.each(r,function(t,e){r[t]=d.validator.normalizeRule(e)}),d(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",t).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",t),this.settings.invalidHandler&&d(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),d(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),d.extend(this.submitted,this.errorMap),this.invalid=d.extend({},this.errorMap),this.valid()||d(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){var e=this.clean(t),r=this.validationTargetFor(e),i=!0;return void 0===(this.lastElement=r)?delete this.invalid[e.name]:(this.prepareElement(r),this.currentElements=d(r),(i=!1!==this.check(r))?delete this.invalid[r.name]:this.invalid[r.name]=!0),d(t).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(e){if(e){for(var t in d.extend(this.errorMap,e),this.errorList=[],e)this.errorList.push({message:e[t],element:this.findByName(t)[0]});this.successList=d.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){d.fn.resetForm&&d(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,r=0;for(e in t)r++;return r},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{d(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===d.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var t=this,e={};return d(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in e||!t.objectLength(d(this).rules()))&&(e[this.name]=!0)})},clean:function(t){return d(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return d(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=d([]),this.toHide=d([]),this.currentElements=d([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e,r=d(t),i=t.type;return"radio"===i||"checkbox"===i?d("input[name='"+t.name+"']:checked").val():"number"===i&&void 0!==t.validity?!t.validity.badInput&&r.val():"string"==typeof(e=r.val())?e.replace(/\r/g,""):e},check:function(e){e=this.validationTargetFor(this.clean(e));var t,r,i,n=d(e).rules(),s=d.map(n,function(t,e){return e}).length,a=!1,o=this.elementValue(e);for(r in n){i={method:r,parameters:n[r]};try{if("dependency-mismatch"===(t=d.validator.methods[r].call(this,o,e,i.parameters))&&1===s){a=!0;continue}if(a=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,i),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+i.method+"' method.",t),t}}if(!a)return this.objectLength(n)&&this.successList.push(e),!0},customDataMessage:function(t,e){return d(t).data("msg"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())||d(t).data("msg")},customMessage:function(t,e){var r=this.settings.messages[t];return r&&(r.constructor===String?r:r[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){return this.findDefined(this.customMessage(t.name,e),this.customDataMessage(t,e),!this.settings.ignoreTitle&&t.title||void 0,d.validator.messages[e],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,e){var r=this.defaultMessage(t,e.method),i=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,e.parameters,t):i.test(r)&&(r=d.validator.format(r.replace(i,"{$1}"),e.parameters)),this.errorList.push({message:r,element:t,method:e.method}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,r;for(t=0;this.errorList[t];t++)r=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,r.element,this.settings.errorClass,this.settings.validClass),this.showLabel(r.element,r.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return d(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var r,i,n,s=this.errorsFor(t),a=this.idOrName(t),o=d(t).attr("aria-describedby");e=e?"<span>"+e+"</span>":e,s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(e)):(r=s=d("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(r=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,d(t)):r.insertAfter(t),s.is("label")?s.attr("for",a):0===s.parents("label[for='"+a+"']").length&&(n=s.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),o?o.match(new RegExp("\\b"+n+"\\b"))||(o+=" "+n):o=n,d(t).attr("aria-describedby",o),(i=this.groups[t.name])&&d.each(this.groups,function(t,e){e===i&&d("[name='"+t+"']",this.currentForm).attr("aria-describedby",s.attr("id"))}))),!e&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var e=this.idOrName(t),r=d(t).attr("aria-describedby"),i="label[for='"+e+"'], label[for='"+e+"'] *";return r&&(i=i+", #"+r.replace(/\s+/g,", #")),this.errors().filter(i)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),d(t).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return d(this.currentForm).find("[name='"+t+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return d("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!d(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!d.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(d(this.currentForm).submit(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(d(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return d.data(t,"previousValue")||d.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:d.extend(this.classRuleSettings,t)},classRules:function(t){var e={},r=d(t).attr("class");return r&&d.each(r.split(" "),function(){this in d.validator.classRuleSettings&&d.extend(e,d.validator.classRuleSettings[this])}),e},attributeRules:function(t){var e,r,i={},n=d(t),s=t.getAttribute("type");for(e in d.validator.methods)"required"===e?(""===(r=t.getAttribute(e))&&(r=!0),r=!!r):r=n.attr(e),/min|max/.test(e)&&(null===s||/number|range|text/.test(s))&&(r=Number(r)),r||0===r?i[e]=r:s===e&&"range"!==s&&(i[e]=!0);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var e,r,i={},n=d(t);for(e in d.validator.methods)void 0!==(r=n.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()))&&(i[e]=r);return i},staticRules:function(t){var e={},r=d.data(t.form,"validator");return r.settings.rules&&(e=d.validator.normalizeRule(r.settings.rules[t.name])||{}),e},normalizeRules:function(i,n){return d.each(i,function(t,e){if(!1!==e){if(e.param||e.depends){var r=!0;switch(typeof e.depends){case"string":r=!!d(e.depends,n.form).length;break;case"function":r=e.depends.call(n,n)}r?i[t]=void 0===e.param||e.param:delete i[t]}}else delete i[t]}),d.each(i,function(t,e){i[t]=d.isFunction(e)?e(n):e}),d.each(["minlength","maxlength"],function(){i[this]&&(i[this]=Number(i[this]))}),d.each(["rangelength","range"],function(){var t;i[this]&&(d.isArray(i[this])?i[this]=[Number(i[this][0]),Number(i[this][1])]:"string"==typeof i[this]&&(t=i[this].replace(/[\[\]]/g,"").split(/[\s,]+/),i[this]=[Number(t[0]),Number(t[1])]))}),d.validator.autoCreateRanges&&(null!=i.min&&null!=i.max&&(i.range=[i.min,i.max],delete i.min,delete i.max),null!=i.minlength&&null!=i.maxlength&&(i.rangelength=[i.minlength,i.maxlength],delete i.minlength,delete i.maxlength)),i},normalizeRule:function(t){if("string"==typeof t){var e={};d.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,r){d.validator.methods[t]=e,d.validator.messages[t]=void 0!==r?r:d.validator.messages[t],e.length<3&&d.validator.addClassRules(t,d.validator.normalizeRule(t))},methods:{required:function(t,e,r){if(!this.depend(r,e))return"dependency-mismatch";if("select"===e.nodeName.toLowerCase()){var i=d(e).val();return i&&0<i.length}return this.checkable(e)?0<this.getLength(t,e):0<d.trim(t).length},email:function(t,e){return this.optional(e)||/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6}(\.[a-z]{2,6})?)$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var r,i,n=0,s=0,a=!1;if((t=t.replace(/\D/g,"")).length<13||19<t.length)return!1;for(r=t.length-1;0<=r;r--)i=t.charAt(r),s=parseInt(i,10),a&&9<(s*=2)&&(s-=9),n+=s,a=!a;return n%10==0},minlength:function(t,e,r){var i=d.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||r<=i},maxlength:function(t,e,r){var i=d.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=r},rangelength:function(t,e,r){var i=d.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i>=r[0]&&i<=r[1]},min:function(t,e,r){return this.optional(e)||r<=t},max:function(t,e,r){return this.optional(e)||t<=r},range:function(t,e,r){return this.optional(e)||t>=r[0]&&t<=r[1]},equalTo:function(t,e,r){var i=d(r);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){d(e).valid()}),t===i.val()},remote:function(s,a,t){if(this.optional(a))return"dependency-mismatch";var o,e,u=this.previousValue(a);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),u.originalMessage=this.settings.messages[a.name].remote,this.settings.messages[a.name].remote=u.message,t="string"==typeof t&&{url:t}||t,u.old===s?u.valid:(u.old=s,(o=this).startRequest(a),(e={})[a.name]=s,d.ajax(d.extend(!0,{url:t,mode:"abort",port:"validate"+a.name,dataType:"json",data:e,context:o.currentForm,success:function(t){var e,r,i,n=!0===t||"true"===t;o.settings.messages[a.name].remote=u.originalMessage,n?(i=o.formSubmitted,o.prepareElement(a),o.formSubmitted=i,o.successList.push(a),delete o.invalid[a.name],o.showErrors()):(e={},r=t||o.defaultMessage(a,"remote"),e[a.name]=u.message=d.isFunction(r)?r(s):r,o.invalid[a.name]=!0,o.showErrors(e)),u.valid=n,o.stopRequest(a,n)}},t)),"pending")},regExp:function(t,e,r){return new RegExp(r).test(t)},maxLen:function(t,e,r){var i=d(e).val(),n=i.match(/\n|\r/g);return!(r<i.length+(null!=n?n.length:0))}}}),d.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var i,n={};d.ajaxPrefilter?d.ajaxPrefilter(function(t,e,r){var i=t.port;"abort"===t.mode&&(n[i]&&n[i].abort(),n[i]=r)}):(i=d.ajax,d.ajax=function(t){var e=("mode"in t?t:d.ajaxSettings).mode,r=("port"in t?t:d.ajaxSettings).port;return"abort"===e?(n[r]&&n[r].abort(),n[r]=i.apply(this,arguments),n[r]):i.apply(this,arguments)}),d.extend(d.fn,{validateDelegate:function(r,t,i){return this.bind(t,function(t){var e=d(t.target);if(e.is(r))return i.apply(e,arguments)})}}),d.validator.setDefaults({errorPlacement:function(t,e){var r;"file"==d(e).attr("type")?(r=d(e).parent().parent().parent()).find(".help-error").length||r.append(t):(r=d(e).parents(".bd")).find(".help-error").length||r.children().first().after(t)},highlight:function(t){},invalidHandler:function(t,e){},success:function(t,e){d(t).remove()}}),d.validator.addMethod("regExp",function(t,e,r){return new RegExp(r).test(t)},"格式不对"),d.validator.addMethod("devId",function(t,e,r){if(""==t)return!0;return/^[0-9a-z]{14}$/.test(t)},"请输入14位0~9、a~z的编号"),d.validator.addMethod("account",function(t,e){if(""==t)return!0;return/^[a-zA-z][\w]{3,19}$/.test(t)},"4-20位、字母开头，字母、数字、下划线"),d.validator.addMethod("isFile",function(t,e,r){if(""==t)return!0;var i={movie:"(.mp4|.3gp|.mov|.flv|.rm|.rmvb)$",music:"(.mp3|.wma)$",pic:"(.jpg|.jpeg|.png)$",sysPic:"(.jpg|.png)$",excel:"(.xls|.xlsx)$",plugin:"(.ipk)$"};return!i[r]||new RegExp(i[r],"i").test(t)},"文件格式不对"),d.validator.addMethod("cellphone",function(t,e,r){if(""==t)return!0;return/^1([38][0-9]|41|4[4-9]|5[0-35-9]|66|70|71|7[3-8]|9[8-9])[0-9]{8}$/.exec(t)},"请输入正确的手机号码"),d.validator.addMethod("version",function(t,e){if(""==t)return!0;return/^[a-zA-Z0-9\.\-_]{1,19}$/.test(t)},"只允许 a-z 0-9 . - _，2-20位"),d.validator.addMethod("isIp",function(t,e){if(""==t)return!0;return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)},"请输入IP格式。"),d.validator.addMethod("date2",function(t,e){if(""==t)return!0;var r=t.match(/^(\d{1,4})(-|)(\d{1,2})\2(\d{1,2})$/);if(null==r)return!1;var i=new Date(r[1],r[3]-1,r[4]);return i.getFullYear()==r[1]&&i.getMonth()+1==r[3]&&i.getDate()==r[4]},"请输入日期格式：YYYY-MM-DD。"),d.validator.addMethod("dateTime",function(t,e){if(""==t)return!0;var r=t.match(/^(\d{1,4})(-|)(\d{1,2})\2(\d{1,2})\s([0-5]\d):([0-5]\d):([0-5]\d)$/);if(null==r)return!1;var i=new Date(r[1],r[3]-1,r[4],r[5],r[6],r[7]);return i.getFullYear()==r[1]&&i.getMonth()+1==r[3]&&i.getDate()==r[4]&&i.getHours()==r[5]&&i.getMinutes()==r[6]&&i.getSeconds()==r[7]},"请输入日期时间格式：YYYY-MM-DD HH:MM:SS。"),d.validator.addMethod("noMath",function(t,e,r){return""==t||t!=d("#"+r).val()},"不能有相同值。"),d.validator.addMethod("phone",function(t,e,r){if(""==t)return!0;return/(^(\d{3,4}-)?\d{7,8})$|(^1\d{10}$)/.exec(t)},"请输入电话或手机。"),d.validator.addMethod("simCard",function(t,e,r){if(""==t)return!0;return/^1\d{10}$/g.test(t)},"请输入手机号码。"),d.validator.addMethod("isScore",function(t,e,r){if(""==t)return!0;return/^[0-9]{1}\.[0-9]{1}$/.exec(t)},"请输入0~9之间且带一位小数的数字。"),d.validator.addMethod("isMac",function(t,e,r){if(""==t)return!0;var i,n=t;return(i=/^([0-9a-fA-F]{2}:){5}[0-9a-fA-F]{2}$|^[0-9a-fA-F]{12}$/.test(n))&&/^[0-9a-fA-F]{12}$/.test(n)&&(n=n.substring(0,2)+":"+n.substring(2,4)+":"+n.substring(4,6)+":"+n.substring(6,8)+":"+n.substring(8,10)+":"+n.substring(10,12)),d(e).val(n.toLowerCase()),i},"Mac格式输入支持：11:22:33:44:55:66 或 112233445566"),d.validator.addMethod("intEnd",function(t,e,r){if(""==t)return!0;var i=parseInt(d("input[name="+r+"]",d(e).parents("form")).val());return!i||!(i<t)},"需小于等于结束"),d.validator.addMethod("intBegin",function(t,e,r){if(""==t)return!0;var i=parseInt(d("input[name="+r+"]",d(e).parents("form")).val());return!i||!(t<i)},"需大于等于开始"),d.validator.addMethod("timeEnd",function(t,e,r){var i=d("input[name="+r+"]");if(""==t)return!0;if(""==i.val())return!0;var n=!0,s=i.val().replace(/\s|\:/g,"-").split("-"),a=t.replace(/\s|\:/g,"-").split("-"),o=new Date(Number(s[0]),Number(s[1])-1,Number(s[2]),Number(s[3]),Number(s[4]),Number(s[5])),u=new Date(Number(a[0]),Number(a[1])-1,Number(a[2]),Number(a[3]),Number(a[4]),Number(a[5]));return o.getTime()<=u.getTime()&&(n=!1),n},"开始时间需大于结束时间"),d.validator.addMethod("timeBegin",function(t,e,r){var i=d("input[name="+r+"]");if(""==t)return!0;if(""==i.val())return!0;var n=!0,s=i.val().replace(/\s|\:/g,"-").split("-"),a=t.replace(/\s|\:/g,"-").split("-"),o=new Date(Number(s[0]),Number(s[1])-1,Number(s[2]),Number(s[3]),Number(s[4]),Number(s[5])),u=new Date(Number(a[0]),Number(a[1])-1,Number(a[2]),Number(a[3]),Number(a[4]),Number(a[5]));return o.getTime()>=u.getTime()&&(n=!1),n},"结束时间需大于开始时间"),d.validator.addMethod("requiredOther",function(t,e,r){var i=!0,n=d("input[name="+r+"]").val();return""==t&&""==n&&(i=!1),i},"必填一项"),d.validator.addMethod("either",function(t,e,r){var i=!0,n=d(""+d(e).attr("data-either")).val();return""==t&&""==n&&(i=!1),i},"配置开关或配置公安中必选一项"),d.validator.addMethod("byte",function(t,e,r){if(""==t)return!0;var i=0,n=t.length;if(n)for(var s=0;s<n;s++)255<t.charCodeAt(s)?i+=3:i++;return i>=r[0]&&i<=r[1]},"{0} ~ {1} 位"),d.validator.addMethod("filter",function(t,e,r){var i=!0;return/[\\]/im.test(t)&&(i=!1),i},"不允许输入 \\"),d.validator.addMethod("routerSize",function(t,e){if(""==t)return!0;return/^([0-9]{1,3}\*){2}[0-9]{1,3}$/g.test(t)},"格式：000*000*000 (长|宽|高<1000)")});