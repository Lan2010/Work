KindEditor.plugin("link",function(d){var c=this,o="link";c.plugin.link={edit:function(){var e=c.lang(o+"."),l='<div style="padding:20px;"><div class="ke-dialog-row"><label for="keUrl" style="width:60px;">'+e.url+'</label><input class="ke-input-text" type="text" id="keUrl" name="url" value="" style="width:260px;" /></div><div class="ke-dialog-row""><label for="keType" style="width:60px;">'+e.linkType+'</label><select id="keType" name="type"></select></div></div>',i=c.createDialog({name:o,width:450,title:c.lang(o),body:l,yesBtn:{name:c.lang("yes"),click:function(e){var l=d.trim(t.val());if("http://"==l||d.invalidUrl(l))return alert(c.lang("invalidUrl")),void t[0].focus();c.exec("createlink",l,n.val()).hideDialog().focus()}}}).div,t=d('input[name="url"]',i),n=d('select[name="type"]',i);t.val("http://"),n[0].options[0]=new Option(e.newWindow,"_blank"),n[0].options[1]=new Option(e.selfWindow,""),c.cmd.selection();var a=c.plugin.getSelectedLink();a&&(c.cmd.range.selectNode(a[0]),c.cmd.select(),t.val(a.attr("data-ke-src")),n.val(a.attr("target"))),t[0].focus(),t[0].select()},delete:function(){c.exec("unlink",null)}},c.clickToolbar(o,c.plugin.link.edit)});