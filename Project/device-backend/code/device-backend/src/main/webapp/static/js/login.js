define("Global",["jquery","Extend"],function(e){"use strict";return{path:null!=window.path?window.path:"/stardev",api:{path:null!=window.apiPath?window.apiPath:"/stardev/api"},checkBrowser:function(){var t=navigator.appVersion.match(/MSIE 7.0|MSIE 6.0|MSIE 8.0|MSIE 9.0|MSIE 10.0/i);return t&&(e("body").msg("tip",{text:"尊敬的用户，你好！ 本系统不支持IE10及以下的浏览器，请升级你的浏览器。推荐谷歌、火狐浏览器！",mask:!0,close:!1,level:"top"}),e("body").find(".login-wrap").remove()),!t}}}),require.config({baseUrl:(null!=window.path?window.path:"/auth")+"/static/js",paths:{jquery:"lib/jquery.min",Extend:"jqueryPlugin/jquery.extend",MD5:"lib/md5"},urlArgs:"v="+version}),require(["jquery","Extend","Global"],function(r,t,a){"use strict";if(a.checkBrowser()){var e=r("#loginForm"),i=r("#btnSubmit"),o=r("input"),u=r("#username"),s=r("#password"),d=(r("#code"),r("#imgCode"),r("#btnCode"),r("#error")),p={path:a.path,uri:"/api/login"},l=(a.path,function(){i.removeAttr("disabled").text("登　录")});(function(){o.on("focus",function(){r(this).parent().parent().addClass("focus")}).on("blur",function(){r(this).parent().parent().removeClass("focus")}),r("#username,#password").on("input keyup",function(t){13!==t.keyCode&&r(this).val()&&d.text("")}),e.on("submit",function(){if(e=!0,d.text(""),o.each(function(){var t=r(this);if(!t.val())return d.text("请输入"+t.attr("placeholder")),e=!1}),!e)return!1;var e,t=u.val(),n=s.val();return r.ajax({url:p.path+p.uri,type:"post",data:{user_name:t,password:n},dataType:"json",beforeSend:function(){i.attr("disabled",!0).text("登录中")},success:function(t){if(0!=t.code)return d.text(t.msg),void l();window.location.replace(a.path+"/")},error:function(t){l()}}),!1})})()}});